package common

import "interfaces"

activity Activity [
	@ActivityController
	port controller : provides ActivityControllerInterface
	
	port trc : provides TRC
	port _trc_ : requires TRC
	
	port data : requires Data
	port dispatcherControl : provides ActivityDispatcherControl
] {
	
	initial init
	
	action Part1 {
		log "S1_doActivityPartI";
	}
	
	trigger Wait when data.continue
	
	action Part2 {
		log "S1_doActivityPartII";
	}
	
	action end {
		raise controller.done;
	}
	
	final fin
	
	succession from init to Part1
	succession from Part1 to Wait
	succession from Wait to Part2
	succession from Part2 to end
	succession from end to fin
	
}

adapter DoActivity of component act : Activity {	
	when any / run
	
	queue controlMessages(priority = 1, capacity = 0) {
		controller.any
	}
	queue trcMessages(priority = 2, capacity = 0) {
		trc.any
	}
	queue dataMessages(priority = 3, capacity = 10) {
		data.any
	}
}
